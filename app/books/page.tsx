"use client";

import { TypeAnimation } from "react-type-animation";
import { motion } from "framer-motion";
import BookSlider from "@/components/sliders/BookSlider";
import PoemCard from "@/components/ui/PoemCard";
import { staggerContainer, smoothFadeUp } from "@/lib/animations";

// --- Restored with your full poems ---
const poems = [
  { 
    title: "زندون در زندون", 
    preview: "می‌خواهم گم شوم اکنون، زین قانونِ شهر بی‌قانون\nپناهگاه من شود زلف‌ات، درین زندون در زندون", 
    fullText: `می‌خواهم گم شوم اکنون، زین قانونِ شهر بی‌قانون
پناهگاه من شود زلف‌ات، درین زندون در زندون

تو هستی آنک می‌باید، درون شعر به شعر آید
تویی اوج عطف من، چنان که سعدی می فرماید:

«خرامان از درم بازآ، کت از جان آرزومندم
به دیدار تو خوشنودم، به گفتار تو خرسندم»

مرا با آنکه می‌دانم، مسیرم تا تو بسیار است
ولیکن عهد خویش نگه دارم، و دور ز اغیار است

اگر روزی دلت ناگاه، مثال سرو خزان لرزید
تو را آغوش من باز است ، تمام عمر بی تردید

من از عالم دل آزردم، به کاشانه غم می‌بردم
وه کنون در آن خانه، بنوای تو گوش بسپردم

دال مبر از هوش شکرِ لبخند و حضورش را
جز بوسه مکن هرگز، زلف و چشم بلورش را` 
  },
  { 
    title: "در امتدادِ شب", 
    preview: "در امتدادِ شب،\nچشمانت فانوس‌های نورند...", 
    fullText: `در امتدادِ شب،
چشمانت فانوس‌های نورند،
که از سیاهی شب درحال عبورند
سایه‌ها بی‌قرار تو هستند،
خواب‌ها خسته از راه های دورند

نامت را که صدا می‌زنم،
دیوارها فرو می‌ریزند،
هزار چراغِ خاموش،
یک‌دم به روشنایی گریزند

بیا که دستانِ ما
تنها گره‌ی کورِ میانِ ما باشد،
نه شکافِ تهی در جهان،
نه مرزی که آینه را از آب،
باد را از پرنده،
و خاک را از ریشه بگیرد

بیا که این شب
بی‌تو، درّه‌ای‌ست بی‌انتها،
و ماه،
بی‌چشمانت،
نیمه‌جانی‌ست در آسمانِ تار

ای «غریبه‌ترین آشنا» ،
در این جهانِ پوسیده،
ما درختانی بی‌سایه‌ایم
که در انتظارِ ریشه،
با باد حرف می‌زنیم

بیا و بگذار
این کوچه‌های غمگین
به قدم‌های ما ایمان بیاورند،
و هیچ دستِ سردی
میانِ انگشتانِ ما
پُل نبندد

بگذار جهان در ما خلاصه شود،
در آن لحظه‌ی کوتاهِ میانِ بودن و رفتن،
در آغوشی که تنهاترین سرزمین است،
و سکوتی که تنها زبانِ عشق است` 
  },
  { 
    title: "کانون تماشا", 
    preview: "تو بگشایی گره از زلف و خواب از دیده بربایی\nجهان گرد چه می‌گردد؟، تو کانون تماشایی", 
    fullText: `تو بگشایی گره از زلف و خواب از دیده بربایی
جهان گرد چه می‌گردد؟، تو کانون تماشایی

نه در شب دیده‌ام چون تو، نه در خورشید تابانش
تو نوری در میان ظلمت و تضادی ز تنهایی

ز رخسارت جهانی را به حیرت می‌توان بردن
به لب‌هایت بهشتم را از قضا یافته‌ام راهی 

در آغوشت به هم ریزد حدود بودن و نابود
جهان ناچیز می‌گردد، تو گر سِرّ خویش بنمایی

مرا در حسرتت هر شب غمی بر جان نشیند، لیک
تو بخشیدی امیدی به زندگانی‌ام بسان دریایی

چه دانم من، کجا آغاز عشقت را به جان خویش یافتم؟
تو شعرم را به وزن دلربایی‌ات می‌آرایی

به چشم تو خلاء دیدم، به لب‌های تو افسانه
که در آغوش گرم خود، تمام من می‌زایی

جهان از بی‌کسی لرزید، ولی در دامن شب‌ها
تو بودی واژهٔ آخر، که شعرم را داد کارایی` 
  },
  { 
    title: "زیبا صنم", 
    preview: "آمدم با عشق سوی کویِ تو\nمانده‌ام در حسرتِ بازوی تو", 
    fullText: `آمدم با عشق سوی کویِ تو
مانده‌ام در حسرتِ بازوی تو

عذر خواهم ز تو، شیرین‌ترین
اشک‌هایت نیست سزاوار زمین

یا رجاءَ القلبِ، یا بدرَ السّنین
فی هواکَ العذبِ، قلبي مستکین

دورم از تو، دل پریشانِ توام
بی‌قرار و خسته، حیرانِ توام

خواهمت هر لحظه ای زیبا صنم
مملو از عطرت شود نقش تنم

خسته‌ام از سیاست وز فریب
در وطن، دور از وطن، هرجا غریب

یادِ آن شب‌ها که بودی در برم
پر گشته هزاران یاد در دفترم

شانه بر شانه به خلوت می‌رسید
آتشِ عشقت بر این جانم دمید

گرچه بخت از ما «ندیدن» را بخواست
لیک قلبمان از جدایی‌ها جداست

دل همیشه عاشقانه مستِ مست
ماه‌گرد عشق، در یادم خوش است

ای امیدِ هر شبم، روشن‌ترین
می‌سپارم خویش به دستت بیش از این` 
  },
  {
    title: "نور شد",
    preview: "تا تو را دیدم به چشمم، نور شد\nعالم از آشوب دل، مسرور شد",
    fullText: `تا تو را دیدم به چشمم، نور شد
عالم از آشوب دل، مسرور شد

شام تارم با رخت صبحی دگر
عشق در جانم چو مهِ پرنور شد

با نگاهت سرزمینم جان گرفت
قلب من در بند آن دستور شد

شعر من بی‌نام تو شوری نداشت
ذکر نامت در لبم منشور شد

خنده‌ات خورشید بر شب‌های من
دوریت اندوه و صد رنجور شد

باد با عطر تو در صحرا دوید
گل به یاد تو، دمی محجور شد

هر نفس یاد تو ای جانانِ دل
لحظه‌ام با خاطرت معمور شد

این غزل تقدیم آن جان پریش
کز غمت در شورشی مستور شد`
  }
];

// ===== CORE BUSINESS LOGIC: Books Page =====
export default function BooksPage() {
  return (
    <div className="container mx-auto px-6 py-12">
      {/* Section 1: Main Book */}
      <section className="text-center mb-24">
        <h1 className="text-4xl md:text-5xl font-black mb-4 text-royal-gold">
          کتاب: کنار مزار من
        </h1>
        <div className="max-w-4xl mx-auto">
          <BookSlider />
        </div>
        <div className="mt-8 text-lg md:text-xl font-light text-gray-600 dark:text-gray-300 h-20 flex items-center justify-center">
          <TypeAnimation
            sequence={[
              'کنار مزار من – سال انتشار 1400 (2021)\nواژه در ذهنم فراوانند اما تکرار کلمات بی‌دلیل نیستند...',
              5000,
              ''
            ]}
            wrapper="p"
            cursor={true}
            repeat={Infinity}
            style={{ whiteSpace: 'pre-line', lineHeight: '1.8' }}
          />
        </div>
      </section>

      {/* Section 2: Selected Poems */}
      <section>
        <h2 className="text-3xl md:text-4xl font-bold mb-12 text-center text-royal-gold-light">
          گزیده اشعار
        </h2>
        <motion.div 
          className="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto"
          variants={staggerContainer}
          initial="hidden"
          whileInView="visible"
          viewport={{ once: true, amount: 0.1 }} // Trigger animation when 10% is visible
        >
          {poems.map((poem, index) => (
            // The PoemCard component is wrapped in a motion.div
            // which handles the item-level animation.
            <motion.div key={index} variants={smoothFadeUp}>
              <PoemCard 
                title={poem.title} 
                preview={poem.preview} 
                fullText={poem.fullText}
              />
            </motion.div>
          ))}
        </motion.div>
      </section>
    </div>
  );
}